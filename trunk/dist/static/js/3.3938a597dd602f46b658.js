webpackJsonp([3],{BO1k:function(t,e,a){t.exports={default:a("fxRn"),__esModule:!0}},fxRn:function(t,e,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,e,a){var i=a("77Pl"),n=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},n2q5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),o=a("BO1k"),s=a.n(o),r=a("2S+2"),c=a("LOkV"),l={data:function(){return{popImage:{show:!1,imageUrl:"",type:0},date:new Date,taskInfo:[],checkInfo:[]}},mounted:function(){this.getData()},methods:{clickMedia:function(t,e){this.popImage.type=t,this.popImage.imageUrl=e,this.popImage.show=!0},getData:function(){var t=this;c.a.m.showLoading(),Object(r.c)().then(function(e){if(e.data){t.taskInfo=e.data;var a=!0,i=!1,n=void 0;try{for(var o,r=s()(t.taskInfo);!(a=(o=r.next()).done);a=!0){var l=o.value;l.content="",l.desc="",l.imgList||(l.imgList=[]),l.videoUrl||(l.videoUrl=[])}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}c.a.m.removeLoading()}).catch(function(t){})},goBack:function(){this.$router.go(-1)},uploadImageChange:function(t){var e=this,a=event.target.files;console.log(a);var i=new FormData,n=!0,o=!1,c=void 0;try{for(var l,v=s()(a);!(n=(l=v.next()).done);n=!0){var d=l.value;i.append(d.name,d)}}catch(t){o=!0,c=t}finally{try{!n&&v.return&&v.return()}finally{if(o)throw c}}Object(r.f)(i).then(function(a){var i=!0,n=!1,o=void 0;try{for(var r,c=s()(e.taskInfo);!(i=(r=c.next()).done);i=!0){var l=r.value;l.id===t&&l.imgList.push(a.msg)}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}console.log(e.taskInfo),e.$forceUpdate()}).catch()},uploadVideoChange:function(t){var e=this,a=event.target.files;console.log(a);var i=new FormData,n=!0,o=!1,c=void 0;try{for(var l,v=s()(a);!(n=(l=v.next()).done);n=!0){var d=l.value;i.append(d.name,d)}}catch(t){o=!0,c=t}finally{try{!n&&v.return&&v.return()}finally{if(o)throw c}}Object(r.f)(i).then(function(a){var i=!0,n=!1,o=void 0;try{for(var r,c=s()(e.taskInfo);!(i=(r=c.next()).done);i=!0){var l=r.value;l.id===t&&l.videoUrl.push(a.msg)}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}console.log(e.taskInfo),e.$forceUpdate()}).catch()},check:function(){var t=this;c.a.m.showLoading(),this.checkInfo=[];var e=!0,a=!1,i=void 0;try{for(var o,l=s()(this.taskInfo);!(e=(o=l.next()).done);e=!0){var v=o.value,d={id:v.id,achievement:v.achievement,imgList:v.imgList,videoUrl:v.videoUrl&&v.videoUrl.length?v.videoUrl[0]:"",desc:v.desc};(d.achievement||d.videoUrl||d.desc||d.imgList&&d.imgList.length)&&this.checkInfo.push(d)}}catch(t){a=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(a)throw i}}Object(r.e)({trainings:n()(this.checkInfo)}).then(function(e){c.a.m.removeLoading(),c.a.m.getCookie("sc_token")?t.$router.push("/"):t.$router.push("/login")}).catch(function(t){})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.popImage.show,expression:"popImage.show"}],staticClass:"pop_image",on:{click:function(e){t.popImage.show=!1,t.popImage.imageUrl=""}}},[a("div",[1==t.popImage.type?a("img",{attrs:{src:t.popImage.imageUrl}}):t._e(),t._v(" "),2==t.popImage.type?a("video",{attrs:{src:t.popImage.imageUrl,autoplay:"true"},on:{click:function(t){t.stopPropagation()}}}):t._e()])]),t._v(" "),a("div",{staticClass:"check_nav"},[a("i",{staticClass:"iconfont",on:{click:t.goBack}},[t._v("")])]),t._v(" "),a("div",{staticClass:"check_top_box jf_flex_col"},[a("div",{staticClass:"check_date"},[t._v(t._s(t._f("formatDate")(t.date)))]),t._v(" "),a("div",{staticClass:"check_tips"},[t._v("每日习惯养成计划")])]),t._v(" "),t._l(t.taskInfo,function(e){return a("div",{staticClass:"check_list_item jf_flex_between"},[a("div",{staticClass:"left_box"},[a("div",[a("input",{staticClass:"ca_checkbox_input",attrs:{type:"checkbox",disabled:""},domProps:{checked:e.state}})])]),t._v(" "),a("div",{staticClass:"right_box jf_flex_col"},[a("div",{staticClass:"check_title jf_flex_between"},[a("div",[a("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                        每天"+t._s(e.name)+t._s(e.target)+t._s(e.unit))]),t._v(" "),a("div",{staticClass:"court"},[t._v("+1学分")])]),t._v(" "),a("div",{staticClass:"media_box jf_flex_start jf_flex_wrap"},[t._l(e.imgList,function(e,i){return a("div",{key:i,staticClass:"media_item_box"},[a("img",{staticClass:"media",attrs:{src:e,alt:""},on:{click:function(a){return t.clickMedia(1,e)}}})])}),t._v(" "),t._l(e.videoUrl,function(e,i){return a("div",{key:i,staticClass:"media_item_box"},[a("video",{staticClass:"media",attrs:{src:e},on:{click:function(a){return t.clickMedia(2,e)}}})])}),t._v(" "),a("div",{staticClass:"media_item_box"},[a("div",{staticClass:"file_bg"}),t._v(" "),a("input",{ref:"img_"+e.id,refInFor:!0,staticClass:"file",attrs:{type:"file",name:"file",accept:"image/*",id:"img_"+e.id,multiple:"multiple",readonly:""},on:{change:function(a){return t.uploadImageChange(e.id)}}})]),t._v(" "),a("div",{staticClass:"media_item_box"},[a("div",{staticClass:"video_bg"}),t._v(" "),a("input",{staticClass:"file",attrs:{type:"file",accept:"video/*",id:"video_"+e.id,readonly:""},on:{change:function(a){return t.uploadVideoChange(e.id)}}})])],2),t._v(" "),a("div",{staticClass:"remark_box"},[a("div",{staticClass:"write_item remark_item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desc,expression:"task.desc"}],attrs:{name:"ryn",id:"b",cols:"30",rows:"10"},domProps:{value:e.desc},on:{input:function(a){a.target.composing||t.$set(e,"desc",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"read_item"},[t._v("\n                        "+t._s(e.name)),a("input",{directives:[{name:"model",rawName:"v-model",value:e.achievement,expression:"task.achievement"}],attrs:{type:"text"},domProps:{value:e.achievement},on:{input:function(a){a.target.composing||t.$set(e,"achievement",a.target.value)}}}),t._v(" "+t._s(e.unit)+"\n                    ")])])])])}),t._v(" "),a("div",{staticClass:"check_submit_btn",on:{click:t.check}},[t._v("\n            提交\n        ")])],2)},staticRenderFns:[]};var d=a("VU/8")(l,v,!1,function(t){a("x0/4")},"data-v-6627b6de",null);e.default=d.exports},"x0/4":function(t,e){}});
//# sourceMappingURL=3.3938a597dd602f46b658.js.map